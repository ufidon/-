# 中英混编
有容乃大, 中英混合编程之猴语.

## 中文猴语解释器
### 概述
在猴语解释器[原版源码](https://monkeylang.org/)基础上增加完中英混编，支持其所有原有功能：
- [x] 整数与算术表达式
- [x] 字串
- [x] 函数，显式及隐式返回，递归函数
- [x] 带参函数，江湖称闭包
- [x] 队列，耦列（江湖称映射，字典，散列)
- [ ] 浮点数。 原版不支持，待做
- [ ] 循环语句。原版不支持，待做
- [ ] 解释器交换环境只支持单行输入，无自动补全，待做
- [x] **新增功能，中英混编，支持万国码及中文关键词**

## 文件组织
```
├── bin # 可运行程序
│   ├── monkey # 用于友邦拓
│   └── monkey.exe # 用于窗群
└── monkey # 源码， [MIT licence](https://opensource.org/licenses/MIT)
    ├── ast # 语法树
    │   ├── ast.go
    │   ├── ast_test.go
    │   └── go.mod
    ├── evaluator # 评估器，运算器，求值器
    │   ├── builtins.go
    │   ├── evaluator.go
    │   ├── evaluator_test.go
    │   └── go.mod
    ├── go.mod
    ├── lexer # 词法器，词法分析器，标识化器
    │   ├── go.mod
    │   ├── lexer.go
    │   └── lexer_test.go
    ├── main.go # 主程序
    ├── object # 解释源码时用到的内部数据结构
    │   ├── environment.go
    │   ├── go.mod
    │   ├── object.go
    │   └── object_test.go
    ├── parser # 树句器，语法分析器，语法树建造器
    │   ├── go.mod
    │   ├── parser.go
    │   ├── parser_test.go
    │   └── parser_tracing.go
    ├── repl # 评估器，运算器，解释器
    │   ├── go.mod
    │   └── repl.go
    └── token # 词类，标识，标记
        ├── go.mod
        └── token.go
```

## 怎样使用：
1. 安装[彩色表情包字体](https://www.google.com/get/noto/help/emoji/)可看见猴子，不然有猴子的地方只显示一个空白方框。（江湖称豆腐），但*并不影响使用*
2. 在窗群(江湖称Windows)命令行中，执行“monkey.exe”
3. 在友邦拓命令行里运行“monkey”

## 猴语一览

猴语类似C语言。**注意所有符号为半角符号**

* 支持的句型与式（表达式)型，下面所有示例可中英混编：

```c
// 1. 整数与算术表达式
令 最优值 = 2 * (30-5) + 5*(2+7);
令 猴名 = "齐天大圣";
令 孙猴子还活着吗 = 真;
令 取经团 = [{"角色":"师傅", "名字":"唐僧", "年龄":50}, {"角色":"杀手", "名字":"孙悟空", "年龄":1500}, {"角色":"食客", "名字":"猪八戒", "年龄":600}, {"角色":"挑夫", "名字":"沙悟净", "年龄":700}];

// 2. 函数
令 啥名 = 函(取经团){取经团["名字"];};
啥名(取经团[0]); // => "唐僧"
啥名(取经团[1]); // => "孙悟空"

显示(节数(取经团)); // 显示 4

// 3. 条件语句，显式及隐式返回，递归函数。
令 兔数数列 = 函(n){
  若(n==0){
    0; // 隐式返回
  } 否{
    若 (n==1){
      返 1; // 显式返回
    }否{
      兔数数列(n-1)+兔数数列(n-2); // 递归及隐式返回
    }
  }
}

// 交互环境中需全写在一行内，如下
令 兔数数列 = 函(n){若(n==0){0;} 否{若(n==1){返 1;}否{兔数数列(n-1)+兔数数列(n-2);}}}
兔数数列(20); // => 6765

// 4. 带参变量函数（江湖行话：闭包）
// “理想气体关系式”返回一个使用函参“体积”的闭包“压强温度关系式”
令 理想气体关系式 = 函(体积){
  函(温度){50*温度/体积}; // 50 为气体恒数
};

// 交互环境中需全写在一行内，如下
令 理想气体关系式 = 函(体积){ 函(温度){50*温度/体积};};

令 理想气体压温关系 = 理想气体关系式(2); // 体积固定为2之下的气体压温关系式

理想气体压温关系(10); // => 250

```
* 关键词列表

| 功能 | 中文关键词 | 英文关键词 |
| ---- | --------- | --------- |
| 函数 |	函 |   fn   |
| 定义变量 |	令 |    let   |
| 逻辑真值 |	真 |    true  |
| 逻辑假值 |	假 |    false |
| 条件语句 |	若 |    if    |
| 条件语句当条件不成立时的分支 |	否 |    else  |
| 函数返回 |	返 |    return |	 
	 

* 内建函数

| 函数 | 功能 |
| ----- | ----- |
| 节数(队列或字串) | 返回字串**字节数**，队列元素数 |
| 字数(队列或字串) | 返回字串**字数**，队列元素数 |
| 首元(队列) | 返回队列第一个元素 |
| 尾元(队列) | 返回队列末尾元素 |
| 掐头(队列) | 去除队列第一个元素，返回其余  |
| 附尾(队列，附加元素) | 附一元素至队列末尾 |


## 中文猴语编译器

## 参考：
* https://monkeylang.org/
